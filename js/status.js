(function() {
  /*
   0000000  000000000   0000000   000000000  000   000   0000000
  000          000     000   000     000     000   000  000     
  0000000      000     000000000     000     000   000  0000000 
       000     000     000   000     000     000   000       000
  0000000      000     000   000     000      0000000   0000000 
  */
  var _, argDir, args, childp, colors, doFetch, doStatus, error, gitStatus, kork, log, pretty, render, slash, valid,
    indexOf = [].indexOf;

  ({colors, childp, slash, valid, args, error, log, _} = require('kxk'));

  log = console.log;

  kork = require('kork');

  render = require('./render');

  argDir = require('./argdir');

  pretty = require('./pretty');

  gitStatus = function(sourceFile) {
    var git, gitDir;
    gitDir = slash.dir(sourceFile);
    git = require('simple-git')(gitDir);
    return doFetch(git, gitDir, sourceFile);
  };

  
  // 00000000  00000000  000000000   0000000  000   000  
  // 000       000          000     000       000   000  
  // 000000    0000000      000     000       000000000  
  // 000       000          000     000       000   000  
  // 000       00000000     000      0000000  000   000  
  doFetch = function(git, gitDir, sourceFile) {
    return git.fetch(function(err, status) {
      if (err) {
        return error(`git fetch error ${err}`);
      }
      return doStatus(git, gitDir, sourceFile);
    });
  };

  
  //  0000000  000000000   0000000   000000000  000   000   0000000  
  // 000          000     000   000     000     000   000  000       
  // 0000000      000     000000000     000     000   000  0000000   
  //      000     000     000   000     000     000   000       000  
  // 0000000      000     000   000     000      0000000   0000000   
  doStatus = function(git, gitDir, sourceFile) {
    return git.status(function(err, status) {
      var a, aheadBehind, arglist, c, change, changes, d, diff, f, fileLists, filtered, gitFile, gitPath, i, j, k, l, lame, len, len1, len2, len3, ls, m, n, o, prfx, ref, ref1, ref2, ref3, relPath, res, results, rgs, split, start, v;
      if (err) {
        return error(`git status error ${err}`);
      }
      changes = [];
      fileLists = _.omitBy(status, function(v, k) {
        return _.isEmpty(v);
      });
      for (k in fileLists) {
        v = fileLists[k];
        m = {
          not_added: colors.gray,
          conflicted: colors.yellow,
          modified: colors.green,
          created: colors.magenta,
          deleted: colors.red
        };
        if (indexOf.call(_.keys(m), k) >= 0) {
          ref1 = (ref = status[k]) != null ? ref : [];
          for (i = 0, len = ref1.length; i < len; i++) {
            f = ref1[i];
            d = argDir();
            arglist = _.filter(args.arguments, function(a) {
              return a !== 'fetch';
            });
            if (arglist.length) {
              filtered = true;
              for (j = 0, len1 = arglist.length; j < len1; j++) {
                a = arglist[j];
                if (slash.join(gitDir, f).indexOf(slash.resolve(a)) === 0) {
                  filtered = false;
                  break;
                }
              }
              if (filtered) {
                if (args.debug) {
                  log('filtered', slash.resolve(a), f, slash.join(gitDir, f));
                }
                continue;
              }
            }
            prfx = "    ";
            prfx = m[k]("█   ");
            gitFile = slash.join(gitDir, f);
            relPath = slash.relative(gitFile, '.');
            lame = slash.extname(gitFile) === '.js' || slash.basename(gitFile) === 'package.json';
            change = prfx + pretty.filePath(relPath, lame && m[k].dim || m[k]);
            
            // 0000000    000  00000000  00000000  
            // 000   000  000  000       000       
            // 000   000  000  000000    000000    
            // 000   000  000  000       000       
            // 0000000    000  000       000       
            if ((k === 'modified' || k === 'created') && args.diff) {
              if (lame) {
                continue;
              }
              res = childp.execSync(`git diff -U0 --ignore-space-at-eol ${gitFile}`, {
                encoding: 'utf8',
                cwd: gitDir
              });
              diff = "";
              c = '▼'.bold.blue;
              start = 0;
              ref2 = res.split(/\r?\n/);
              for (n = 0, len2 = ref2.length; n < len2; n++) {
                l = ref2[n];
                ls = colors.strip(l);
                if ((ref3 = ls.substr(0, 4)) === '+++ ' || ref3 === '--- ') {

                } else if (ls[0] === '@') {
                  split = ls.split('@@');
                  split = split[1].split(' +');
                  split = split[1].split(',');
                  start = parseInt(split[0]);
                  diff += "\n" + c;
                  c = '●'.blue.dim;
                } else if (ls[0] === '+') {
                  diff += "\n ";
                  // diff += "[0;7m#{slash.join(gitDir, f)}:#{start}[0m"
                  start++;
                  rgs = kork.ranges(ls.substr(1), slash.ext(f));
                  if (valid(rgs)) {
                    diff += render(rgs);
                  } else {
                    diff += ls.substr(1).white;
                  }
                } else if (ls[0] === '-') {
                  diff += "\n " + (ls.substr(1)).gray.bold.dim;
                }
              }
              if (diff.length) {
                change += diff + "\n" + "▲".blue.dim;
              }
            }
            changes.push(change);
          }
        }
      }
      relPath = slash.relative(gitDir, '.');
      if (relPath === '') {
        relPath = '.';
      }
      gitPath = pretty.filePath(relPath, colors.white);
      aheadBehind = function() {
        var st;
        if (status.ahead || status.behind) {
          st = '';
          if (status.ahead) {
            st += `▲ ${status.ahead}`.gray.bold.bgBlack;
          }
          if (status.behind) {
            st += `▼ ${status.behind}`.red.bold.bgBlack;
          }
          return st = _.padEnd(st, 4);
        } else {
          return '';
        }
      };
      log(('    ' + gitPath + ' ').bgBlue + ' ' + aheadBehind());
      results = [];
      for (o = 0, len3 = changes.length; o < len3; o++) {
        c = changes[o];
        results.push(log(c));
      }
      return results;
    });
  };

  module.exports = {
    gitStatus: gitStatus
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdHVzLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIi4uL2NvZmZlZS9zdGF0dXMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQUE7Ozs7Ozs7QUFBQSxNQUFBLENBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxNQUFBLEVBQUEsT0FBQSxFQUFBLFFBQUEsRUFBQSxLQUFBLEVBQUEsU0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsS0FBQTtJQUFBOztFQVFBLENBQUEsQ0FBRSxNQUFGLEVBQVUsTUFBVixFQUFrQixLQUFsQixFQUF5QixLQUF6QixFQUFnQyxJQUFoQyxFQUFzQyxLQUF0QyxFQUE2QyxHQUE3QyxFQUFrRCxDQUFsRCxDQUFBLEdBQXdELE9BQUEsQ0FBUSxLQUFSLENBQXhEOztFQUVBLEdBQUEsR0FBUyxPQUFPLENBQUM7O0VBQ2pCLElBQUEsR0FBUyxPQUFBLENBQVEsTUFBUjs7RUFDVCxNQUFBLEdBQVMsT0FBQSxDQUFRLFVBQVI7O0VBQ1QsTUFBQSxHQUFTLE9BQUEsQ0FBUSxVQUFSOztFQUNULE1BQUEsR0FBUyxPQUFBLENBQVEsVUFBUjs7RUFFVCxTQUFBLEdBQVksUUFBQSxDQUFDLFVBQUQsQ0FBQTtBQUVSLFFBQUEsR0FBQSxFQUFBO0lBQUEsTUFBQSxHQUFTLEtBQUssQ0FBQyxHQUFOLENBQVUsVUFBVjtJQUNULEdBQUEsR0FBTSxPQUFBLENBQVEsWUFBUixDQUFBLENBQXNCLE1BQXRCO1dBQ04sT0FBQSxDQUFRLEdBQVIsRUFBYSxNQUFiLEVBQXFCLFVBQXJCO0VBSlEsRUFoQlo7Ozs7Ozs7O0VBNEJBLE9BQUEsR0FBVSxRQUFBLENBQUMsR0FBRCxFQUFNLE1BQU4sRUFBYyxVQUFkLENBQUE7V0FFTixHQUFHLENBQUMsS0FBSixDQUFVLFFBQUEsQ0FBQyxHQUFELEVBQUssTUFBTCxDQUFBO01BRU4sSUFBRyxHQUFI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QUFBLENBQUE7QUFDVixZQUFBO1FBQUEsSUFBRyxNQUFNLENBQUMsS0FBUCxJQUFnQixNQUFNLENBQUMsTUFBMUI7VUFDSSxFQUFBLEdBQUs7VUFDTCxJQUFHLE1BQU0sQ0FBQyxLQUFWO1lBQ0ksRUFBQSxJQUFNLENBQUEsRUFBQSxDQUFBLENBQUssTUFBTSxDQUFDLEtBQVosQ0FBQSxDQUFtQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFEeEM7O1VBRUEsSUFBRyxNQUFNLENBQUMsTUFBVjtZQUNJLEVBQUEsSUFBTSxDQUFBLEVBQUEsQ0FBQSxDQUFLLE1BQU0sQ0FBQyxNQUFaLENBQUEsQ0FBb0IsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBRHhDOztpQkFFQSxFQUFBLEdBQUssQ0FBQyxDQUFDLE1BQUYsQ0FBUyxFQUFULEVBQWEsQ0FBYixFQU5UO1NBQUEsTUFBQTtpQkFRSSxHQVJKOztNQURVO01BV2QsR0FBQSxDQUFJLENBQUMsTUFBQSxHQUFTLE9BQVQsR0FBbUIsR0FBcEIsQ0FBd0IsQ0FBQyxNQUF6QixHQUFrQyxHQUFsQyxHQUF3QyxXQUFBLENBQUEsQ0FBNUM7QUFDQTtNQUFBLEtBQUEsMkNBQUE7O3FCQUNJLEdBQUEsQ0FBSSxDQUFKO01BREosQ0FBQTs7SUFqR08sQ0FBWDtFQUZPOztFQXNHWCxNQUFNLENBQUMsT0FBUCxHQUNJO0lBQUEsU0FBQSxFQUFVO0VBQVY7QUFoSkoiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcbiAwMDAwMDAwICAwMDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAwMDAwXG4wMDAgICAgICAgICAgMDAwICAgICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAgIFxuMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwMDAwMDAwICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwMDAwMCBcbiAgICAgMDAwICAgICAwMDAgICAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAwMDAgICAgICAgMDAwXG4wMDAwMDAwICAgICAgMDAwICAgICAwMDAgICAwMDAgICAgIDAwMCAgICAgIDAwMDAwMDAgICAwMDAwMDAwIFxuIyMjXG5cbnsgY29sb3JzLCBjaGlsZHAsIHNsYXNoLCB2YWxpZCwgYXJncywgZXJyb3IsIGxvZywgXyB9ID0gcmVxdWlyZSAna3hrJ1xuXG5sb2cgICAgPSBjb25zb2xlLmxvZ1xua29yayAgID0gcmVxdWlyZSAna29yaydcbnJlbmRlciA9IHJlcXVpcmUgJy4vcmVuZGVyJ1xuYXJnRGlyID0gcmVxdWlyZSAnLi9hcmdkaXInXG5wcmV0dHkgPSByZXF1aXJlICcuL3ByZXR0eSdcblxuZ2l0U3RhdHVzID0gKHNvdXJjZUZpbGUpIC0+XG5cbiAgICBnaXREaXIgPSBzbGFzaC5kaXIgc291cmNlRmlsZVxuICAgIGdpdCA9IHJlcXVpcmUoJ3NpbXBsZS1naXQnKSBnaXREaXJcbiAgICBkb0ZldGNoIGdpdCwgZ2l0RGlyLCBzb3VyY2VGaWxlXG4gICAgXG4jIDAwMDAwMDAwICAwMDAwMDAwMCAgMDAwMDAwMDAwICAgMDAwMDAwMCAgMDAwICAgMDAwICBcbiMgMDAwICAgICAgIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgIFxuIyAwMDAwMDAgICAgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwICAgICAgIDAwMDAwMDAwMCAgXG4jIDAwMCAgICAgICAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAgICAgMDAwICAgMDAwICBcbiMgMDAwICAgICAgIDAwMDAwMDAwICAgICAwMDAgICAgICAwMDAwMDAwICAwMDAgICAwMDAgIFxuXG5kb0ZldGNoID0gKGdpdCwgZ2l0RGlyLCBzb3VyY2VGaWxlKSAtPlxuICAgIFxuICAgIGdpdC5mZXRjaCAoZXJyLHN0YXR1cykgLT5cbiAgICAgICAgXG4gICAgICAgIGlmIGVyciB0aGVuIHJldHVybiBlcnJvciBcImdpdCBmZXRjaCBlcnJvciAje2Vycn1cIlxuICAgICAgICBkb1N0YXR1cyBnaXQsIGdpdERpciwgc291cmNlRmlsZVxuICAgICAgICBcbiMgIDAwMDAwMDAgIDAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgIFxuIyAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAgICAgXG4jIDAwMDAwMDAgICAgICAwMDAgICAgIDAwMDAwMDAwMCAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMDAwMDAgICBcbiMgICAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMCAgIDAwMCAgICAgICAwMDAgIFxuIyAwMDAwMDAwICAgICAgMDAwICAgICAwMDAgICAwMDAgICAgIDAwMCAgICAgIDAwMDAwMDAgICAwMDAwMDAwICAgXG5cbmRvU3RhdHVzID0gKGdpdCwgZ2l0RGlyLCBzb3VyY2VGaWxlKSAtPlxuICAgICAgICBcbiAgICBnaXQuc3RhdHVzIChlcnIsc3RhdHVzKSAtPlxuXG4gICAgICAgIGlmIGVyciB0aGVuIHJldHVybiBlcnJvciBcImdpdCBzdGF0dXMgZXJyb3IgI3tlcnJ9XCJcblxuICAgICAgICBjaGFuZ2VzID0gW11cblxuICAgICAgICBmaWxlTGlzdHMgPSBfLm9taXRCeSBzdGF0dXMsICh2LGspIC0+IF8uaXNFbXB0eSB2XG5cbiAgICAgICAgZm9yIGssdiBvZiBmaWxlTGlzdHNcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbSA9XG4gICAgICAgICAgICAgICAgbm90X2FkZGVkOiAgY29sb3JzLmdyYXlcbiAgICAgICAgICAgICAgICBjb25mbGljdGVkOiBjb2xvcnMueWVsbG93XG4gICAgICAgICAgICAgICAgbW9kaWZpZWQ6ICAgY29sb3JzLmdyZWVuXG4gICAgICAgICAgICAgICAgY3JlYXRlZDogICAgY29sb3JzLm1hZ2VudGFcbiAgICAgICAgICAgICAgICBkZWxldGVkOiAgICBjb2xvcnMucmVkXG5cbiAgICAgICAgICAgIGlmIGsgaW4gXy5rZXlzIG1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgZiBpbiBzdGF0dXNba10gPyBbXVxuICAgICAgICAgICAgICAgICAgICBkID0gYXJnRGlyKClcblxuICAgICAgICAgICAgICAgICAgICBhcmdsaXN0ID0gXy5maWx0ZXIgYXJncy5hcmd1bWVudHMsIChhKSAtPiBhIG5vdCBpbiBbJ2ZldGNoJ11cbiAgICAgICAgICAgICAgICAgICAgaWYgYXJnbGlzdC5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGEgaW4gYXJnbGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNsYXNoLmpvaW4oZ2l0RGlyLCBmKS5pbmRleE9mKHNsYXNoLnJlc29sdmUgYSkgPT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBmaWx0ZXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZyAnZmlsdGVyZWQnLCBzbGFzaC5yZXNvbHZlKGEpLCBmLCBzbGFzaC5qb2luKGdpdERpciwgZikgaWYgYXJncy5kZWJ1Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgICAgICAgICAgICAgcHJmeCAgICA9IFwiICAgIFwiXG4gICAgICAgICAgICAgICAgICAgIHByZnggICAgPSBtW2tdIFwi4paIICAgXCJcbiAgICAgICAgICAgICAgICAgICAgZ2l0RmlsZSA9IHNsYXNoLmpvaW4gZ2l0RGlyLCBmXG4gICAgICAgICAgICAgICAgICAgIHJlbFBhdGggPSBzbGFzaC5yZWxhdGl2ZSBnaXRGaWxlLCAnLidcbiAgICAgICAgICAgICAgICAgICAgbGFtZSAgICA9IHNsYXNoLmV4dG5hbWUoZ2l0RmlsZSkgPT0gJy5qcycgb3Igc2xhc2guYmFzZW5hbWUoZ2l0RmlsZSkgPT0gJ3BhY2thZ2UuanNvbidcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlICA9IHByZnggKyBwcmV0dHkuZmlsZVBhdGgocmVsUGF0aCwgKGxhbWUgYW5kIG1ba10uZGltIG9yIG1ba10pKVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgIyAwMDAwMDAwICAgIDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAwICBcbiAgICAgICAgICAgICAgICAgICAgIyAwMDAgICAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgIyAwMDAgICAwMDAgIDAwMCAgMDAwMDAwICAgIDAwMDAwMCAgICBcbiAgICAgICAgICAgICAgICAgICAgIyAwMDAgICAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgIyAwMDAwMDAwICAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIGsgaW4gWydtb2RpZmllZCcsICdjcmVhdGVkJ10gYW5kIGFyZ3MuZGlmZlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBpZiBsYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IGNoaWxkcC5leGVjU3luYyBcImdpdCBkaWZmIC1VMCAtLWlnbm9yZS1zcGFjZS1hdC1lb2wgI3tnaXRGaWxlfVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuY29kaW5nOiAndXRmOCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjd2Q6IGdpdERpclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlmZiA9IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSAn4pa8Jy5ib2xkLmJsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGwgaW4gcmVzLnNwbGl0IC9cXHI/XFxuL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxzID0gY29sb3JzLnN0cmlwKGwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbHMuc3Vic3RyKDAsNCkgaW4gWycrKysgJywgJy0tLSAnXSB0aGVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiBsc1swXSA9PSAnQCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsaXQgPSBscy5zcGxpdCAnQEAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwbGl0ID0gc3BsaXRbMV0uc3BsaXQgJyArJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxpdCA9IHNwbGl0WzFdLnNwbGl0ICcsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydCA9IHBhcnNlSW50IHNwbGl0WzBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmYgKz0gKFwiXFxuXCIrYylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9ICfil48nLmJsdWUuZGltXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiBsc1swXSA9PSAnKydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZiArPSBcIlxcbiBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIGRpZmYgKz0gXCJcdTAwMWJbMDs3bSN7c2xhc2guam9pbihnaXREaXIsIGYpfToje3N0YXJ0fVx1MDAxYlswbVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0KytcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmdzID0ga29yay5yYW5nZXMgbHMuc3Vic3RyKDEpLCBzbGFzaC5leHQgZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2YWxpZCByZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmYgKz0gcmVuZGVyIHJnc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmICs9IGxzLnN1YnN0cigxKS53aGl0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgbHNbMF0gPT0gJy0nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmYgKz0gXCJcXG4gXCIgKyAobHMuc3Vic3RyKDEpKS5ncmF5LmJvbGQuZGltXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2UgKz0gZGlmZitcIlxcblwiK1wi4payXCIuYmx1ZS5kaW0gaWYgZGlmZi5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLnB1c2ggY2hhbmdlXG5cbiAgICAgICAgcmVsUGF0aCA9IHNsYXNoLnJlbGF0aXZlIGdpdERpciwgJy4nXG4gICAgICAgIHJlbFBhdGggPSAnLicgaWYgcmVsUGF0aCA9PSAnJ1xuICAgICAgICBnaXRQYXRoID0gcHJldHR5LmZpbGVQYXRoIHJlbFBhdGgsIGNvbG9ycy53aGl0ZVxuXG4gICAgICAgIGFoZWFkQmVoaW5kID0gKCkgLT5cbiAgICAgICAgICAgIGlmIHN0YXR1cy5haGVhZCBvciBzdGF0dXMuYmVoaW5kXG4gICAgICAgICAgICAgICAgc3QgPSAnJ1xuICAgICAgICAgICAgICAgIGlmIHN0YXR1cy5haGVhZFxuICAgICAgICAgICAgICAgICAgICBzdCArPSBcIuKWsiAje3N0YXR1cy5haGVhZH1cIi5ncmF5LmJvbGQuYmdCbGFja1xuICAgICAgICAgICAgICAgIGlmIHN0YXR1cy5iZWhpbmRcbiAgICAgICAgICAgICAgICAgICAgc3QgKz0gXCLilrwgI3tzdGF0dXMuYmVoaW5kfVwiLnJlZC5ib2xkLmJnQmxhY2tcbiAgICAgICAgICAgICAgICBzdCA9IF8ucGFkRW5kIHN0LCA0XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgJydcblxuICAgICAgICBsb2cgKCcgICAgJyArIGdpdFBhdGggKyAnICcpLmJnQmx1ZSArICcgJyArIGFoZWFkQmVoaW5kKClcbiAgICAgICAgZm9yIGMgaW4gY2hhbmdlc1xuICAgICAgICAgICAgbG9nIGNcblxubW9kdWxlLmV4cG9ydHMgPSBcbiAgICBnaXRTdGF0dXM6Z2l0U3RhdHVzXG4iXX0=
//# sourceURL=../coffee/status.coffee