(function() {
  /*
  000   000   0000000   000   000  00000000    0000000   0000000
  000  000   000   000  0000  000  000   000  000   000  000   000
  0000000    000   000  000 0 000  0000000    000000000  000   000
  000  000   000   000  000  0000  000   000  000   000  000   000
  000   000   0000000   000   000  000   000  000   000  0000000
  */
  var _, actions, argDir, args, build, cmd, colors, config, dirty, dotGit, fs, gitcount, gitup, j, len, log, noon, opt, optall, pkg, pretty, ref, runcmd, should, slash, status, walk, watch, wlk;

  ({args, colors, slash, noon, fs, log, _} = require('kxk'));

  argDir = require('./argdir');

  build = require('./build');

  config = require('./config');

  pretty = require('./pretty');

  runcmd = require('./runcmd');

  should = require('./should');

  status = require('./status');

  watch = require('./watch');

  walk = require('./walk');

  pkg = require(`${__dirname}/../package`);

  args = args.init("arguments  depend on options                            **\nrun        build dirty or missing targets in dir        false\nrebuild    rebuild all targets in dir                   false  -R\nwatch      watch directory for changes                  false\ninfo       show build status of dir                     false\nbump       bump package.* version [major|minor|patch]   false\ndiff       show git diff of file/dir                    false\nstatus     show git status of file/dir                  false\ncommit     add, commit and push [msg]                   false\nupdate     update npm packages                          false\npublish    bump, commit & publish to npm [msg]          false\ntest       run tests                                    false\nverbose    log more                                     false\nquiet      log nothing                                  false\ndebug      log debug                                    false  -D\nlogtime    log with time                                true");

  actions = ['bump', 'commit', 'publish', 'update', 'test', 'watch', 'run', 'rebuild', 'info', 'status', 'diff'];

  if (!actions.map(function(a) {
    return args[a];
  }).reduce(function(acc, val) {
    return acc || val;
  })) {
    args.run = true; // makes run the default action if no other action is set
  }

  
  // 0000000    00000000  00000000   0000000   000   000  000      000000000   0000000
  // 000   000  000       000       000   000  000   000  000         000     000
  // 000   000  0000000   000000    000000000  000   000  000         000     0000000
  // 000   000  000       000       000   000  000   000  000         000          000
  // 0000000    00000000  000       000   000   0000000   0000000     000     0000000
  opt = noon.parse("coffee  . ext js   . map true . replace .. /coffee/ /js/ .. ^coffee/ js/ \nnoon    . ext json\njson    . ext noon . filter  .. package.json$\nstyl    . ext css  . replace .. /style/ /css/ .. /styl/ /js/css/\npug     . ext html . replace .. /pug/ /js/");

  // 000   0000000   000   000   0000000   00000000   00000000
  // 000  000        0000  000  000   000  000   000  000
  // 000  000  0000  000 0 000  000   000  0000000    0000000
  // 000  000   000  000  0000  000   000  000   000  000
  // 000   0000000   000   000   0000000   000   000  00000000
  opt.ignore = [/gulpfile.coffee$/, /Gruntfile.coffee$/, /\.konrad\.noon$/, /menu.noon$/];

  wlk = {
    ignore: [/node_modules/, /bower_components/, /\/img$/, /\/\..+$/, /\.git$/, /\.app$/, /_misc/, /.*-x64/, /.*-ia32/, /inno/]
  };

  // 0000000    000  00000000   000000000  000   000
  // 000   000  000  000   000     000      000 000
  // 000   000  000  0000000       000       00000
  // 000   000  000  000   000     000        000
  // 0000000    000  000   000     000        000
  dirty = function(sourceFile, targetFile) {
    var ss, ts;
    if (!fs.existsSync(targetFile)) {
      return true;
    }
    ss = fs.statSync(sourceFile);
    ts = fs.statSync(targetFile);
    return ss.mtime.getTime() > ts.mtime.getTime();
  };

  // 000  000   000  00000000   0000000
  // 000  0000  000  000       000   000
  // 000  000 0 000  000000    000   000
  // 000  000  0000  000       000   000
  // 000  000   000  000        0000000
  if (args.info) {
    console.log('‚óã‚óè info'.gray);
    walk(wlk, opt, function(sourceFile, targetFile) {
      if (args.verbose) {
        log(`source: ${sourceFile} target: ${targetFile}`);
      }
      if (dirty(sourceFile, targetFile)) {
        return console.log(pretty.filePath(_.padEnd(slash.relative(sourceFile, argDir()), 40), colors.yellow), " ‚ñ∫ ".red.dim, pretty.filePath(slash.relative(targetFile, argDir()), colors.red));
      } else if (args.verbose) {
        return console.log(pretty.filePath(_.padEnd(slash.relative(sourceFile, argDir()), 40), colors.magenta), " ‚ñ∫ ".green.dim, pretty.filePath(slash.relative(targetFile, argDir()), colors.green));
      }
    });
  }

  if (args.diff) {
    args.status = true;
  }

  if (args.status) {
    optall = _.defaults(opt, {
      all: true
    });
    gitcount = 0;
    walk(wlk, optall, function(sourceFile, targetFile) {
      var i, j, len, ref;
      if (!targetFile) {
        if (slash.basename(sourceFile) === '.git') {
          status.gitStatus(sourceFile);
          gitcount += 1;
        }
        if (slash.dirExists(sourceFile)) {
          ref = opt.ignore;
          for (j = 0, len = ref.length; j < len; j++) {
            i = ref[j];
            if (i.test(sourceFile)) {
              return false;
            }
          }
        }
      }
      return true;
    });
    if (!gitcount) {
      gitup = slash.parse(argDir());
      while (gitup.base) {
        dotGit = slash.join(gitup.dir, '.git');
        if (fs.existsSync(dotGit)) {
          status.gitStatus(dotGit);
          break;
        }
        gitup = slash.parse(gitup.dir);
      }
    }
  }

  // 00000000   000   000  000   000
  // 000   000  000   000  0000  000
  // 0000000    000   000  000 0 000
  // 000   000  000   000  000  0000
  // 000   000   0000000   000   000
  if (args.run || args.rebuild) {
    console.log('üîßüîß ' + (args.rebuild && 'rebuild' || 'run').gray);
    walk(wlk, opt, function(sourceFile, targetFile) {
      var isDirty, src, tgt;
      if (targetFile) {
        isDirty = dirty(sourceFile, targetFile);
        if (args.rebuild || isDirty) {
          src = pretty.filePath(_.padEnd(slash.relative(sourceFile, argDir()), 40), isDirty && colors.red || colors.yellow);
          tgt = pretty.filePath(slash.relative(targetFile, argDir()), colors.green);
          console.log(src, "üîß  ", tgt);
          return build(sourceFile, opt, function(sourceFile, targetFile) {
            var o;
            o = config.obj(targetFile, opt);
            if (should('browserify', o, targetFile)) {
              console.log(pretty.filePath(_.padEnd(slash.relative(o.browserify.main, argDir()), 40), colors.yellow), "üîß  ", pretty.filePath(slash.relative(o.browserify.out, argDir()), colors.blue));
              return runcmd('browserify', `${o.browserify.main} ${o.browserify.out}`, config.path('browserify', slash.resolve(targetFile), opt));
            }
          });
        }
      }
    });
  }

  ref = ['update', 'bump', 'commit', 'publish', 'test'];
  for (j = 0, len = ref.length; j < len; j++) {
    cmd = ref[j];
    if (args[cmd]) {
      if (!runcmd(cmd, args.arguments.join(' ', process.cwd()))) {
        break;
      }
      if (args.verbose) {
        console.log('üîß  done'.gray);
      }
      if (args.arguments && (cmd === 'commit' || cmd === 'bump')) {
        break;
      }
    }
  }

  if (args.watch) {
    watch(wlk, opt);
  }

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia29ucmFkLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIi4uL2NvZmZlZS9rb25yYWQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQUE7Ozs7Ozs7QUFBQSxNQUFBLENBQUEsRUFBQSxPQUFBLEVBQUEsTUFBQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsRUFBQSxFQUFBLEVBQUEsUUFBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQTs7RUFRQSxDQUFBLENBQUUsSUFBRixFQUFRLE1BQVIsRUFBZ0IsS0FBaEIsRUFBdUIsSUFBdkIsRUFBNkIsRUFBN0IsRUFBaUMsR0FBakMsRUFBc0MsQ0FBdEMsQ0FBQSxHQUE0QyxPQUFBLENBQVEsS0FBUixDQUE1Qzs7RUFFQSxNQUFBLEdBQWMsT0FBQSxDQUFRLFVBQVI7O0VBQ2QsS0FBQSxHQUFjLE9BQUEsQ0FBUSxTQUFSOztFQUNkLE1BQUEsR0FBYyxPQUFBLENBQVEsVUFBUjs7RUFDZCxNQUFBLEdBQWMsT0FBQSxDQUFRLFVBQVI7O0VBQ2QsTUFBQSxHQUFjLE9BQUEsQ0FBUSxVQUFSOztFQUNkLE1BQUEsR0FBYyxPQUFBLENBQVEsVUFBUjs7RUFDZCxNQUFBLEdBQWMsT0FBQSxDQUFRLFVBQVI7O0VBQ2QsS0FBQSxHQUFjLE9BQUEsQ0FBUSxTQUFSOztFQUNkLElBQUEsR0FBYyxPQUFBLENBQVEsUUFBUjs7RUFDZCxHQUFBLEdBQWMsT0FBQSxDQUFRLENBQUEsQ0FBQSxDQUFHLFNBQUgsQ0FBYSxXQUFiLENBQVI7O0VBRWQsSUFBQSxHQUFPLElBQUks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LElBQW1CLENBQUEsR0FBQSxLQUFRLFFBQVIsSUFBQSxHQUFBLEtBQWtCLE1BQWxCLENBQXRCO0FBQ0ksY0FESjtPQVBKOztFQUZKOztFQVlBLElBQUcsSUFBSSxDQUFDLEtBQVI7SUFDSSxLQUFBLENBQU0sR0FBTixFQUFXLEdBQVgsRUFESjs7QUF4TEEiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcbjAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwXG4wMDAgIDAwMCAgIDAwMCAgIDAwMCAgMDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwXG4wMDAwMDAwICAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwICAwMDAwMDAwICAgIDAwMDAwMDAwMCAgMDAwICAgMDAwXG4wMDAgIDAwMCAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwXG4wMDAgICAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMFxuIyMjXG5cbnsgYXJncywgY29sb3JzLCBzbGFzaCwgbm9vbiwgZnMsIGxvZywgXyB9ID0gcmVxdWlyZSAna3hrJ1xuXG5hcmdEaXIgICAgICA9IHJlcXVpcmUgJy4vYXJnZGlyJ1xuYnVpbGQgICAgICAgPSByZXF1aXJlICcuL2J1aWxkJ1xuY29uZmlnICAgICAgPSByZXF1aXJlICcuL2NvbmZpZydcbnByZXR0eSAgICAgID0gcmVxdWlyZSAnLi9wcmV0dHknXG5ydW5jbWQgICAgICA9IHJlcXVpcmUgJy4vcnVuY21kJ1xuc2hvdWxkICAgICAgPSByZXF1aXJlICcuL3Nob3VsZCdcbnN0YXR1cyAgICAgID0gcmVxdWlyZSAnLi9zdGF0dXMnXG53YXRjaCAgICAgICA9IHJlcXVpcmUgJy4vd2F0Y2gnXG53YWxrICAgICAgICA9IHJlcXVpcmUgJy4vd2FsaydcbnBrZyAgICAgICAgID0gcmVxdWlyZSBcIiN7X19kaXJuYW1lfS8uLi9wYWNrYWdlXCJcblxuYXJncyA9IGFyZ3MuaW5pdCBcIlwiXCJcbiAgICBhcmd1bWVudHMgIGRlcGVuZCBvbiBvcHRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqXG4gICAgcnVuICAgICAgICBidWlsZCBkaXJ0eSBvciBtaXNzaW5nIHRhcmdldHMgaW4gZGlyICAgICAgICBmYWxzZVxuICAgIHJlYnVpbGQgICAgcmVidWlsZCBhbGwgdGFyZ2V0cyBpbiBkaXIgICAgICAgICAgICAgICAgICAgZmFsc2UgIC1SXG4gICAgd2F0Y2ggICAgICB3YXRjaCBkaXJlY3RvcnkgZm9yIGNoYW5nZXMgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgIGluZm8gICAgICAgc2hvdyBidWlsZCBzdGF0dXMgb2YgZGlyICAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICBidW1wICAgICAgIGJ1bXAgcGFja2FnZS4qIHZlcnNpb24gW21ham9yfG1pbm9yfHBhdGNoXSAgIGZhbHNlXG4gICAgZGlmZiAgICAgICBzaG93IGdpdCBkaWZmIG9mIGZpbGUvZGlyICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgIHN0YXR1cyAgICAgc2hvdyBnaXQgc3RhdHVzIG9mIGZpbGUvZGlyICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICBjb21taXQgICAgIGFkZCwgY29tbWl0IGFuZCBwdXNoIFttc2ddICAgICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgdXBkYXRlICAgICB1cGRhdGUgbnBtIHBhY2thZ2VzICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgIHB1Ymxpc2ggICAgYnVtcCwgY29tbWl0ICYgcHVibGlzaCB0byBucG0gW21zZ10gICAgICAgICAgZmFsc2VcbiAgICB0ZXN0ICAgICAgIHJ1biB0ZXN0cyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgdmVyYm9zZSAgICBsb2cgbW9yZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZVxuICAgIHF1aWV0ICAgICAgbG9nIG5vdGhpbmcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICBkZWJ1ZyAgICAgIGxvZyBkZWJ1ZyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlICAtRFxuICAgIGxvZ3RpbWUgICAgbG9nIHdpdGggdGltZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxuICAgIFwiXCJcIlxuXG5hY3Rpb25zID0gWydidW1wJywgJ2NvbW1pdCcsICdwdWJsaXNoJywgJ3VwZGF0ZScsICd0ZXN0JywgJ3dhdGNoJywgJ3J1bicsICdyZWJ1aWxkJywgJ2luZm8nLCAnc3RhdHVzJywgJ2RpZmYnXVxuXG5pZiBub3QgYWN0aW9ucy5tYXAoKGEpIC0+IGFyZ3NbYV0pLnJlZHVjZSgoYWNjLHZhbCkgLT4gYWNjIG9yIHZhbClcbiAgICBhcmdzLnJ1biA9IHRydWUgIyBtYWtlcyBydW4gdGhlIGRlZmF1bHQgYWN0aW9uIGlmIG5vIG90aGVyIGFjdGlvbiBpcyBzZXRcbiAgICBcbiMgMDAwMDAwMCAgICAwMDAwMDAwMCAgMDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAgICAgICAwMDAwMDAwMDAgICAwMDAwMDAwXG4jIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICAgMDAwICAgICAwMDBcbiMgMDAwICAgMDAwICAwMDAwMDAwICAgMDAwMDAwICAgIDAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgICAwMDAgICAgIDAwMDAwMDBcbiMgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgICAwMDAgICAgICAgICAgMDAwXG4jIDAwMDAwMDAgICAgMDAwMDAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAgMDAwICAgICAwMDAwMDAwXG5cbm9wdCA9IG5vb24ucGFyc2UgXCJcIlwiXG5jb2ZmZWUgIC4gZXh0IGpzICAgLiBtYXAgdHJ1ZSAuIHJlcGxhY2UgLi4gL2NvZmZlZS8gL2pzLyAuLiBeY29mZmVlLyBqcy8gXG5ub29uICAgIC4gZXh0IGpzb25cbmpzb24gICAgLiBleHQgbm9vbiAuIGZpbHRlciAgLi4gcGFja2FnZS5qc29uJFxuc3R5bCAgICAuIGV4dCBjc3MgIC4gcmVwbGFjZSAuLiAvc3R5bGUvIC9jc3MvIC4uIC9zdHlsLyAvanMvY3NzL1xucHVnICAgICAuIGV4dCBodG1sIC4gcmVwbGFjZSAuLiAvcHVnLyAvanMvXG5cIlwiXCJcblxuIyAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwMDAwMDBcbiMgMDAwICAwMDAgICAgICAgIDAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMFxuIyAwMDAgIDAwMCAgMDAwMCAgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwMDAwMFxuIyAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwXG4jIDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwMFxuXG5vcHQuaWdub3JlID0gW1xuICAgIC9ndWxwZmlsZS5jb2ZmZWUkL1xuICAgIC9HcnVudGZpbGUuY29mZmVlJC9cbiAgICAvXFwua29ucmFkXFwubm9vbiQvXG4gICAgL21lbnUubm9vbiQvXG5dXG5cbndsayA9XG4gICAgaWdub3JlOiBbXG4gICAgICAgIC9ub2RlX21vZHVsZXMvXG4gICAgICAgIC9ib3dlcl9jb21wb25lbnRzL1xuICAgICAgICAvXFwvaW1nJC9cbiAgICAgICAgL1xcL1xcLi4rJC9cbiAgICAgICAgL1xcLmdpdCQvXG4gICAgICAgIC9cXC5hcHAkL1xuICAgICAgICAvX21pc2MvXG4gICAgICAgIC8uKi14NjQvXG4gICAgICAgIC8uKi1pYTMyL1xuICAgICAgICAvaW5uby9cbiAgICBdXG5cbiMgMDAwMDAwMCAgICAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMDAwICAwMDAgICAwMDBcbiMgMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAgMDAwIDAwMFxuIyAwMDAgICAwMDAgIDAwMCAgMDAwMDAwMCAgICAgICAwMDAgICAgICAgMDAwMDBcbiMgMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAgICAwMDBcbiMgMDAwMDAwMCAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAgICAwMDBcblxuZGlydHkgPSAoc291cmNlRmlsZSwgdGFyZ2V0RmlsZSkgLT5cbiAgICBcbiAgICBpZiBub3QgZnMuZXhpc3RzU3luYyB0YXJnZXRGaWxlIHRoZW4gcmV0dXJuIHRydWVcbiAgICBzcyA9IGZzLnN0YXRTeW5jIHNvdXJjZUZpbGVcbiAgICB0cyA9IGZzLnN0YXRTeW5jIHRhcmdldEZpbGVcbiAgICBzcy5tdGltZS5nZXRUaW1lKCkgPiB0cy5tdGltZS5nZXRUaW1lKClcblxuIyAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgICAwMDAwMDAwXG4jIDAwMCAgMDAwMCAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwXG4jIDAwMCAgMDAwIDAgMDAwICAwMDAwMDAgICAgMDAwICAgMDAwXG4jIDAwMCAgMDAwICAwMDAwICAwMDAgICAgICAgMDAwICAgMDAwXG4jIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgIDAwMDAwMDBcblxuaWYgYXJncy5pbmZvXG5cbiAgICBjb25zb2xlLmxvZyAn4peL4pePIGluZm8nLmdyYXlcblxuICAgIHdhbGsgd2xrLCBvcHQsIChzb3VyY2VGaWxlLCB0YXJnZXRGaWxlKSAtPlxuXG4gICAgICAgIGxvZyBcInNvdXJjZTogI3tzb3VyY2VGaWxlfSB0YXJnZXQ6ICN7dGFyZ2V0RmlsZX1cIiBpZiBhcmdzLnZlcmJvc2VcbiAgICAgICAgaWYgZGlydHkgc291cmNlRmlsZSwgdGFyZ2V0RmlsZVxuICAgICAgICAgICAgY29uc29sZS5sb2cgcHJldHR5LmZpbGVQYXRoKF8ucGFkRW5kKHNsYXNoLnJlbGF0aXZlKHNvdXJjZUZpbGUsIGFyZ0RpcigpKSwgNDApLCBjb2xvcnMueWVsbG93KSwgXCIg4pa6IFwiLnJlZC5kaW0sIHByZXR0eS5maWxlUGF0aChzbGFzaC5yZWxhdGl2ZSh0YXJnZXRGaWxlLCBhcmdEaXIoKSksIGNvbG9ycy5yZWQpXG4gICAgICAgIGVsc2UgaWYgYXJncy52ZXJib3NlXG4gICAgICAgICAgICBjb25zb2xlLmxvZyBwcmV0dHkuZmlsZVBhdGgoXy5wYWRFbmQoc2xhc2gucmVsYXRpdmUoc291cmNlRmlsZSwgYXJnRGlyKCkpLCA0MCksIGNvbG9ycy5tYWdlbnRhKSwgXCIg4pa6IFwiLmdyZWVuLmRpbSwgcHJldHR5LmZpbGVQYXRoKHNsYXNoLnJlbGF0aXZlKHRhcmdldEZpbGUsIGFyZ0RpcigpKSwgY29sb3JzLmdyZWVuKVxuXG5pZiBhcmdzLmRpZmZcbiAgICBcbiAgICBhcmdzLnN0YXR1cyAgPSB0cnVlXG5cbmlmIGFyZ3Muc3RhdHVzXG4gICAgXG4gICAgb3B0YWxsID0gXy5kZWZhdWx0cyBvcHQsIGFsbDogdHJ1ZVxuICAgIGdpdGNvdW50ID0gMFxuXG4gICAgd2FsayB3bGssIG9wdGFsbCwgKHNvdXJjZUZpbGUsIHRhcmdldEZpbGUpIC0+XG5cbiAgICAgICAgaWYgbm90IHRhcmdldEZpbGVcblxuICAgICAgICAgICAgaWYgc2xhc2guYmFzZW5hbWUoc291cmNlRmlsZSkgPT0gJy5naXQnXG4gICAgICAgICAgICAgICAgc3RhdHVzLmdpdFN0YXR1cyBzb3VyY2VGaWxlXG4gICAgICAgICAgICAgICAgZ2l0Y291bnQgKz0gMVxuXG4gICAgICAgICAgICBpZiBzbGFzaC5kaXJFeGlzdHMgc291cmNlRmlsZVxuICAgICAgICAgICAgICAgIGZvciBpIGluIG9wdC5pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgaWYgaS50ZXN0IHNvdXJjZUZpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB0cnVlXG5cbiAgICBpZiBub3QgZ2l0Y291bnRcbiAgICAgICAgZ2l0dXAgPSBzbGFzaC5wYXJzZSBhcmdEaXIoKVxuICAgICAgICB3aGlsZSBnaXR1cC5iYXNlXG4gICAgICAgICAgICBkb3RHaXQgPSBzbGFzaC5qb2luIGdpdHVwLmRpciwgJy5naXQnXG4gICAgICAgICAgICBpZiBmcy5leGlzdHNTeW5jIGRvdEdpdFxuICAgICAgICAgICAgICAgIHN0YXR1cy5naXRTdGF0dXMgZG90R2l0XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGdpdHVwID0gc2xhc2gucGFyc2UgZ2l0dXAuZGlyXG5cbiMgMDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMCAgMDAwXG4jIDAwMDAwMDAgICAgMDAwICAgMDAwICAwMDAgMCAwMDBcbiMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwMFxuIyAwMDAgICAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwXG5cbmlmIGFyZ3MucnVuIG9yIGFyZ3MucmVidWlsZFxuXG4gICAgY29uc29sZS5sb2cgJ/CflKfwn5SnICcgKyAoYXJncy5yZWJ1aWxkIGFuZCAncmVidWlsZCcgb3IgJ3J1bicpLmdyYXlcbiAgICBcbiAgICB3YWxrIHdsaywgb3B0LCAoc291cmNlRmlsZSwgdGFyZ2V0RmlsZSkgLT5cbiAgICAgICAgaWYgdGFyZ2V0RmlsZVxuICAgICAgICAgICAgaXNEaXJ0eSA9IGRpcnR5IHNvdXJjZUZpbGUsIHRhcmdldEZpbGVcbiAgICAgICAgICAgIGlmIGFyZ3MucmVidWlsZCBvciBpc0RpcnR5XG4gICAgICAgICAgICAgICAgc3JjID0gcHJldHR5LmZpbGVQYXRoKF8ucGFkRW5kKHNsYXNoLnJlbGF0aXZlKHNvdXJjZUZpbGUsIGFyZ0RpcigpKSwgNDApLCBpc0RpcnR5IGFuZCBjb2xvcnMucmVkIG9yIGNvbG9ycy55ZWxsb3cpXG4gICAgICAgICAgICAgICAgdGd0ID0gcHJldHR5LmZpbGVQYXRoKHNsYXNoLnJlbGF0aXZlKHRhcmdldEZpbGUsIGFyZ0RpcigpKSwgY29sb3JzLmdyZWVuKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nIHNyYywgXCLwn5SnICBcIiwgdGd0XG4gICAgICAgICAgICAgICAgYnVpbGQgc291cmNlRmlsZSwgb3B0LCAoc291cmNlRmlsZSwgdGFyZ2V0RmlsZSkgLT5cbiAgICAgICAgICAgICAgICAgICAgbyA9IGNvbmZpZy5vYmogdGFyZ2V0RmlsZSwgb3B0XG4gICAgICAgICAgICAgICAgICAgIGlmIHNob3VsZCAnYnJvd3NlcmlmeScsIG8sIHRhcmdldEZpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nIHByZXR0eS5maWxlUGF0aChfLnBhZEVuZChzbGFzaC5yZWxhdGl2ZShvLmJyb3dzZXJpZnkubWFpbiwgYXJnRGlyKCkpLCA0MCksIGNvbG9ycy55ZWxsb3cpLCBcIvCflKcgIFwiLCBwcmV0dHkuZmlsZVBhdGgoc2xhc2gucmVsYXRpdmUoby5icm93c2VyaWZ5Lm91dCwgYXJnRGlyKCkpLCBjb2xvcnMuYmx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bmNtZCAnYnJvd3NlcmlmeScsIFwiI3tvLmJyb3dzZXJpZnkubWFpbn0gI3tvLmJyb3dzZXJpZnkub3V0fVwiLCBjb25maWcucGF0aCAnYnJvd3NlcmlmeScsIHNsYXNoLnJlc29sdmUodGFyZ2V0RmlsZSksIG9wdFxuXG5mb3IgY21kIGluIFsndXBkYXRlJywgJ2J1bXAnLCAnY29tbWl0JywgJ3B1Ymxpc2gnLCAndGVzdCddXG5cbiAgICBpZiBhcmdzW2NtZF1cblxuICAgICAgICBpZiBub3QgcnVuY21kIGNtZCwgYXJncy5hcmd1bWVudHMuam9pbiAnICcsIHByb2Nlc3MuY3dkKClcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY29uc29sZS5sb2cgJ/CflKcgIGRvbmUnLmdyYXkgaWYgYXJncy52ZXJib3NlXG5cbiAgICAgICAgaWYgYXJncy5hcmd1bWVudHMgYW5kIGNtZCBpbiBbJ2NvbW1pdCcsICdidW1wJ11cbiAgICAgICAgICAgIGJyZWFrXG5cbmlmIGFyZ3Mud2F0Y2hcbiAgICB3YXRjaCB3bGssIG9wdFxuICAgICJdfQ==
//# sourceURL=../coffee/konrad.coffee