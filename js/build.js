// koffee 1.4.0

/*
0000000    000   000  000  000      0000000  
000   000  000   000  000  000      000   000
0000000    000   000  000  000      000   000
000   000  000   000  000  000      000   000
0000000     0000000   000  0000000  0000000
 */
var _, argDir, args, build, colors, compile, config, empty, fs, kerror, klog, pretty, ref, runcmd, should, slash, target, writeCompiled;

ref = require('kxk'), colors = ref.colors, slash = ref.slash, empty = ref.empty, args = ref.args, fs = ref.fs, kerror = ref.kerror, klog = ref.klog, _ = ref._;

pretty = require('./pretty');

config = require('./config');

argDir = require('./argdir');

should = require('./should');

target = require('./target');

compile = require('./compile');

runcmd = require('./runcmd');

build = function(sourceFile, opt, cb) {
    var cfg, ext, main, out, pwd, targetFile;
    if (args.debug) {
        klog("source file".gray, sourceFile);
    }
    ext = slash.extname(sourceFile).substr(1);
    cfg = config.obj(sourceFile, opt);
    if (ext === 'js' && should('browserify', cfg, sourceFile)) {
        main = cfg.browserify.main;
        out = cfg.browserify.out;
        pwd = config.path('browserify', slash.resolve(sourceFile), opt);
        if (out !== slash.relative(sourceFile, pwd)) {
            klog(pretty.filePath(_.padEnd(slash.relative(main, argDir()), 40), colors.yellow), "üîß  ", pretty.filePath(slash.relative(out, argDir()), colors.blue));
            runcmd('browserify', main + " " + out, pwd);
        }
        return;
    }
    targetFile = target(sourceFile, opt);
    if (targetFile == null) {
        console.warn("no targetFile for source: " + sourceFile, opt);
        return;
    }
    if (args.debug) {
        klog("target file".gray, targetFile);
    }
    return fs.readFile(sourceFile, 'utf8', function(err, sourceText) {
        var compiled, stat, ttat;
        if (err) {
            kerror("can't read " + sourceFile);
            cb();
            return;
        }
        compiled = compile(sourceText, ext, sourceFile, targetFile, cfg);
        if (empty(compiled)) {
            cb();
            return;
        }
        slash.logErrors = true;
        if (!slash.fileExists(targetFile) || slash.readText(targetFile) !== compiled) {
            return writeCompiled(sourceFile, targetFile, compiled, cb);
        } else {
            if (args.debug) {
                klog('unchanged'.green.dim, pretty.filePath(slash.relative(targetFile, argDir()), colors.gray));
            }
            if (args.verbose) {
                console.log(pretty.time(), "üëç  " + (pretty.filePath(sourceFile)) + " " + '‚ñ∫'.bold.yellow + " " + (pretty.filePath(targetFile)));
            }
            stat = fs.statSync(sourceFile);
            ttat = fs.statSync(targetFile);
            if (stat.mtime.getTime() !== ttat.mtime.getTime()) {
                return fs.utimesSync(slash.resolve(targetFile), stat.atime, stat.mtime);
            }
        }
    });
};

writeCompiled = function(sourceFile, targetFile, compiled, cb) {
    fs.mkdirSync(slash.dir(targetFile), {
        recursive: true
    });
    slash.writeText(targetFile, compiled);
    if (!args.quiet) {
        if (args.verbose) {
            console.log(pretty.time(), "üëç   " + (pretty.filePath(slash.tilde(sourceFile))) + " " + '‚ñ∫'.bold.yellow + " " + (pretty.filePath(slash.tilde(targetFile))));
        } else {
            console.log(pretty.time(), "üëç   " + (pretty.filePath(slash.tilde(targetFile))));
        }
    }
    return typeof cb === "function" ? cb(sourceFile, targetFile) : void 0;
};

module.exports = build;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXMiOlsiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7QUFBQSxJQUFBOztBQVFBLE1BQXNELE9BQUEsQ0FBUSxLQUFSLENBQXRELEVBQUUsbUJBQUYsRUFBVSxpQkFBVixFQUFpQixpQkFBakIsRUFBd0IsZUFBeEIsRUFBOEIsV0FBOUIsRUFBa0MsbUJBQWxDLEVBQTBDLGVBQTFDLEVBQWdEOztBQUVoRCxNQUFBLEdBQVUsT0FBQSxDQUFRLFVBQVI7O0FBQ1YsTUFBQSxHQUFVLE9BQUEsQ0FBUSxVQUFSOztBQUNWLE1BQUEsR0FBVSxPQUFBLENBQVEsVUFBUjs7QUFDVixNQUFBLEdBQVUsT0FBQSxDQUFRLFVBQVI7O0FBQ1YsTUFBQSxHQUFVLE9BQUEsQ0FBUSxVQUFSOztBQUNWLE9BQUEsR0FBVSxPQUFBLENBQVEsV0FBUjs7QUFDVixNQUFBLEdBQVUsT0FBQSxDQUFRLFVBQVI7O0FBRVYsS0FBQSxHQUFRLFNBQUMsVUFBRCxFQUFhLEdBQWIsRUFBa0IsRUFBbEI7QUFFSixRQUFBO0lBQUEsSUFBdUMsSUFBSSxDQUFDLEtBQTVDO1FBQUEsSUFBQSxDQUFLLGFBQWEsQ0FBQyxJQUFuQixFQUF5QixVQUF6QixFQUFBOztJQUVBLEdBQUEsR0FBTSxLQUFLLENBQUMsT0FBTixDQUFjLFVBQWQsQ0FBeUIsQ0FBQyxNQUExQixDQUFpQyxDQUFqQztJQUVOLEdBQUEsR0FBTSxNQUFNLENBQUMsR0FBUCxDQUFXLFVBQVgsRUFBdUIsR0FBdkI7SUFFTixJQUFHLEdBQUEsS0FBTyxJQUFQLElBQWdCLE1BQUEsQ0FBTyxZQUFQLEVBQXFCLEdBQXJCLEVBQTBCLFVBQTFCLENBQW5CO1FBQ0ksSUFBQSxHQUFPLEdBQUcsQ0FBQyxVQUFVLENBQUM7UUFDdEIsR0FBQSxHQUFPLEdBQUcsQ0FBQyxVQUFVLENBQUM7UUFDdEIsR0FBQSxHQUFPLE1BQU0sQ0FBQyxJQUFQLENBQVksWUFBWixFQUEwQixL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LENBQUMsS0FBOUMsRUFBcUQsSUFBSSxDQUFDLEtBQTFELEVBREo7YUFSSjs7SUFyQjJCLENBQS9CO0FBOUJJOztBQW9FUixhQUFBLEdBQWdCLFNBQUMsVUFBRCxFQUFhLFVBQWIsRUFBeUIsUUFBekIsRUFBbUMsRUFBbkM7SUFFWixFQUFFLENBQUMsU0FBSCxDQUFhLEtBQUssQ0FBQyxHQUFOLENBQVUsVUFBVixDQUFiLEVBQW9DO1FBQUEsU0FBQSxFQUFVLElBQVY7S0FBcEM7SUFFQSxLQUFLLENBQUMsU0FBTixDQUFnQixVQUFoQixFQUE0QixRQUE1QjtJQUVBLElBQUcsQ0FBSSxJQUFJLENBQUMsS0FBWjtRQUNJLElBQUcsSUFBSSxDQUFDLE9BQVI7WUFDRyxPQUFBLENBQUMsR0FBRCxDQUFLLE1BQU0sQ0FBQyxJQUFQLENBQUEsQ0FBTCxFQUFvQixPQUFBLEdBQU8sQ0FBQyxNQUFNLENBQUMsUUFBUCxDQUFnQixLQUFLLENBQUMsS0FBTixDQUFZLFVBQVosQ0FBaEIsQ0FBRCxDQUFQLEdBQStDLEdBQS9DLEdBQWtELEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBM0QsR0FBa0UsR0FBbEUsR0FBb0UsQ0FBQyxNQUFNLENBQUMsUUFBUCxDQUFnQixLQUFLLENBQUMsS0FBTixDQUFZLFVBQVosQ0FBaEIsQ0FBRCxDQUF4RixFQURIO1NBQUEsTUFBQTtZQUdHLE9BQUEsQ0FBQyxHQUFELENBQUssTUFBTSxDQUFDLElBQVAsQ0FBQSxDQUFMLEVBQW9CLE9BQUEsR0FBTyxDQUFDLE1BQU0sQ0FBQyxRQUFQLENBQWdCLEtBQUssQ0FBQyxLQUFOLENBQVksVUFBWixDQUFoQixDQUFELENBQTNCLEVBSEg7U0FESjs7c0NBTUEsR0FBSSxZQUFZO0FBWko7O0FBY2hCLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4wMDAwMDAwICAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAgICAwMDAwMDAwICBcbjAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMCAgICAgIDAwMCAgIDAwMFxuMDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMCAgMDAwICAgICAgMDAwICAgMDAwXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAgICAwMDAgICAwMDBcbjAwMDAwMDAgICAgIDAwMDAwMDAgICAwMDAgIDAwMDAwMDAgIDAwMDAwMDAgIFxuIyMjXG5cbnsgY29sb3JzLCBzbGFzaCwgZW1wdHksIGFyZ3MsIGZzLCBrZXJyb3IsIGtsb2csIF8gfSA9IHJlcXVpcmUgJ2t4aydcblxucHJldHR5ICA9IHJlcXVpcmUgJy4vcHJldHR5J1xuY29uZmlnICA9IHJlcXVpcmUgJy4vY29uZmlnJ1xuYXJnRGlyICA9IHJlcXVpcmUgJy4vYXJnZGlyJ1xuc2hvdWxkICA9IHJlcXVpcmUgJy4vc2hvdWxkJ1xudGFyZ2V0ICA9IHJlcXVpcmUgJy4vdGFyZ2V0J1xuY29tcGlsZSA9IHJlcXVpcmUgJy4vY29tcGlsZSdcbnJ1bmNtZCAgPSByZXF1aXJlICcuL3J1bmNtZCdcblxuYnVpbGQgPSAoc291cmNlRmlsZSwgb3B0LCBjYikgLT5cblxuICAgIGtsb2cgXCJzb3VyY2UgZmlsZVwiLmdyYXksIHNvdXJjZUZpbGUgaWYgYXJncy5kZWJ1Z1xuXG4gICAgZXh0ID0gc2xhc2guZXh0bmFtZShzb3VyY2VGaWxlKS5zdWJzdHIoMSlcblxuICAgIGNmZyA9IGNvbmZpZy5vYmogc291cmNlRmlsZSwgb3B0XG5cbiAgICBpZiBleHQgPT0gJ2pzJyBhbmQgc2hvdWxkICdicm93c2VyaWZ5JywgY2ZnLCBzb3VyY2VGaWxlXG4gICAgICAgIG1haW4gPSBjZmcuYnJvd3NlcmlmeS5tYWluXG4gICAgICAgIG91dCAgPSBjZmcuYnJvd3NlcmlmeS5vdXRcbiAgICAgICAgcHdkICA9IGNvbmZpZy5wYXRoICdicm93c2VyaWZ5Jywgc2xhc2gucmVzb2x2ZShzb3VyY2VGaWxlKSwgb3B0XG4gICAgICAgIGlmIG91dCAhPSBzbGFzaC5yZWxhdGl2ZSBzb3VyY2VGaWxlLCBwd2RcbiAgICAgICAgICAgIGtsb2cgcHJldHR5LmZpbGVQYXRoKF8ucGFkRW5kKHNsYXNoLnJlbGF0aXZlKG1haW4sIGFyZ0RpcigpKSwgNDApLCBjb2xvcnMueWVsbG93KSwgXCLwn5SnICBcIiwgcHJldHR5LmZpbGVQYXRoKHNsYXNoLnJlbGF0aXZlKG91dCwgYXJnRGlyKCkpLCBjb2xvcnMuYmx1ZSlcbiAgICAgICAgICAgIHJ1bmNtZCAnYnJvd3NlcmlmeScsIFwiI3ttYWlufSAje291dH1cIiwgcHdkXG4gICAgICAgIHJldHVyblxuXG4gICAgdGFyZ2V0RmlsZSA9IHRhcmdldCBzb3VyY2VGaWxlLCBvcHRcbiAgICBpZiBub3QgdGFyZ2V0RmlsZT9cbiAgICAgICAgd2FybiBcIm5vIHRhcmdldEZpbGUgZm9yIHNvdXJjZTogI3tzb3VyY2VGaWxlfVwiLCBvcHRcbiAgICAgICAgcmV0dXJuXG5cbiAgICBrbG9nIFwidGFyZ2V0IGZpbGVcIi5ncmF5LCB0YXJnZXRGaWxlIGlmIGFyZ3MuZGVidWdcblxuICAgICMgMDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuICAgICMgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMDAwICAwMDAgICAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDBcblxuICAgIGZzLnJlYWRGaWxlIHNvdXJjZUZpbGUsICd1dGY4JyAoZXJyLCBzb3VyY2VUZXh0KSAtPlxuXG4gICAgICAgIGlmIGVyciBcbiAgICAgICAgICAgIGtlcnJvciBcImNhbid0IHJlYWQgI3tzb3VyY2VGaWxlfVwiXG4gICAgICAgICAgICBjYigpXG4gICAgICAgICAgICByZXR1cm4gXG4gICAgICAgIFxuICAgICAgICAjICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwICAgICAwMCAgMDAwMDAwMDAgICAwMDAgIDAwMCAgICAgIDAwMDAwMDAwICBcbiAgICAgICAgIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAgICAwMDAgICAgICAgXG4gICAgICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwMCAgIDAwMCAgMDAwICAgICAgMDAwMDAwMCAgIFxuICAgICAgICAjIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAwIDAwMCAgMDAwICAgICAgICAwMDAgIDAwMCAgICAgIDAwMCAgICAgICBcbiAgICAgICAgIyAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMCAgICAgICAgMDAwICAwMDAwMDAwICAwMDAwMDAwMCAgXG4gICAgICAgIFxuICAgICAgICBjb21waWxlZCA9IGNvbXBpbGUgc291cmNlVGV4dCwgZXh0LCBzb3VyY2VGaWxlLCB0YXJnZXRGaWxlLCBjZmdcbiAgICAgICAgXG4gICAgICAgIGlmIGVtcHR5IGNvbXBpbGVkXG4gICAgICAgICAgICBjYigpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgXG4gICAgICAgIHNsYXNoLmxvZ0Vycm9ycyA9IHRydWVcbiAgICAgICAgXG4gICAgICAgIGlmIG5vdCBzbGFzaC5maWxlRXhpc3RzKHRhcmdldEZpbGUpIG9yIHNsYXNoLnJlYWRUZXh0KHRhcmdldEZpbGUpICE9IGNvbXBpbGVkXG4gICAgICAgICAgICB3cml0ZUNvbXBpbGVkIHNvdXJjZUZpbGUsIHRhcmdldEZpbGUsIGNvbXBpbGVkLCBjYlxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBrbG9nICd1bmNoYW5nZWQnLmdyZWVuLmRpbSwgcHJldHR5LmZpbGVQYXRoKHNsYXNoLnJlbGF0aXZlKHRhcmdldEZpbGUsIGFyZ0RpcigpKSwgY29sb3JzLmdyYXkpIGlmIGFyZ3MuZGVidWdcbiAgICAgICAgICAgIGlmIGFyZ3MudmVyYm9zZVxuICAgICAgICAgICAgICAgIGxvZyBwcmV0dHkudGltZSgpLCBcIvCfkY0gICN7cHJldHR5LmZpbGVQYXRoIHNvdXJjZUZpbGV9ICN7J+KWuicuYm9sZC55ZWxsb3d9ICN7cHJldHR5LmZpbGVQYXRoIHRhcmdldEZpbGV9XCJcbiAgICAgICAgICAgIHN0YXQgPSBmcy5zdGF0U3luYyBzb3VyY2VGaWxlXG4gICAgICAgICAgICB0dGF0ID0gZnMuc3RhdFN5bmMgdGFyZ2V0RmlsZVxuICAgICAgICAgICAgaWYgc3RhdC5tdGltZS5nZXRUaW1lKCkgIT0gdHRhdC5tdGltZS5nZXRUaW1lKClcbiAgICAgICAgICAgICAgICBmcy51dGltZXNTeW5jIHNsYXNoLnJlc29sdmUodGFyZ2V0RmlsZSksIHN0YXQuYXRpbWUsIHN0YXQubXRpbWVcblxuIyAwMDAgICAwMDAgIDAwMDAwMDAwICAgMDAwICAwMDAwMDAwMDAgIDAwMDAwMDAwXG4jIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgICAgIDAwMCAgICAgMDAwXG4jIDAwMDAwMDAwMCAgMDAwMDAwMCAgICAwMDAgICAgIDAwMCAgICAgMDAwMDAwMFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAwMDAgICAgIDAwMFxuIyAwMCAgICAgMDAgIDAwMCAgIDAwMCAgMDAwICAgICAwMDAgICAgIDAwMDAwMDAwXG5cbndyaXRlQ29tcGlsZWQgPSAoc291cmNlRmlsZSwgdGFyZ2V0RmlsZSwgY29tcGlsZWQsIGNiKSAtPlxuICAgIFxuICAgIGZzLm1rZGlyU3luYyBzbGFzaC5kaXIodGFyZ2V0RmlsZSksIHJlY3Vyc2l2ZTp0cnVlXG5cbiAgICBzbGFzaC53cml0ZVRleHQgdGFyZ2V0RmlsZSwgY29tcGlsZWRcblxuICAgIGlmIG5vdCBhcmdzLnF1aWV0XG4gICAgICAgIGlmIGFyZ3MudmVyYm9zZVxuICAgICAgICAgICAgbG9nIHByZXR0eS50aW1lKCksIFwi8J+RjSAgICN7cHJldHR5LmZpbGVQYXRoIHNsYXNoLnRpbGRlIHNvdXJjZUZpbGV9ICN7J+KWuicuYm9sZC55ZWxsb3d9ICN7cHJldHR5LmZpbGVQYXRoIHNsYXNoLnRpbGRlIHRhcmdldEZpbGV9XCJcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbG9nIHByZXR0eS50aW1lKCksIFwi8J+RjSAgICN7cHJldHR5LmZpbGVQYXRoIHNsYXNoLnRpbGRlIHRhcmdldEZpbGV9XCJcblxuICAgIGNiPyBzb3VyY2VGaWxlLCB0YXJnZXRGaWxlXG5cbm1vZHVsZS5leHBvcnRzID0gYnVpbGRcbiJdfQ==
//# sourceURL=../coffee/build.coffee